(function(e,t){if(typeof define==="function"&&define.amd){define(t)}else if(typeof exports==="object"){var r=t();r.__esModule=true;r["default"]=r;module.exports=r}else{e.tplify=t()}})(this,function(){var e=['var tpl = "";'];function t(e,t){t=t||{};$tpl=r(e);e=this.$tpl.outerHTML;$ast=p(e);var n=['var tpl = "";'];var i=o($ast[0]);for(var a=0,s=i.length;a<s;a++){var l=i[a];if(!l.type){var u='tpl+="'+l.replace(/{{(.*?)}}/g,function(e,t){return'"+'+t+'+"'})+'"';n.push(u)}else{var f=l.txt;n.push(f);if(f.indexOf("else")!=-1){n[a+1]=n[a];n[a]=f}}}n.push("return tpl;");return new Function("data",n.join("\n"))(t)}function r(e){if(e instanceof Object){return e}var t=document.createElement("div");t.innerHTML=e.trim();return t.childNodes[0]}var n="t-";var a={"t-for":1,"t-if":1,"t-else":1,"t-else-if":1,"t-bind":0,"t-html":0,"t-show":0,"t-on":0};var s=/([:\w-]+)|['"]{1}([^'"]*)['"]{1}/g;var l=Object.create?Object.create(null):{};l.area=true;l.base=true;l.br=true;l.col=true;l.embed=true;l.hr=true;l.img=true;l.input=true;l.keygen=true;l.link=true;l.menuitem=true;l.meta=true;l.param=true;l.source=true;l.track=true;l.wbr=true;function u(e){var t=0;var r;var n={type:"tag",name:"",voidElement:false,attrs:{},children:[],dsl:[]};e.replace(s,function(i){if(a[i]){n.dsl.push(i)}if(t%2){r=i}else{if(t===0){if(l[i]||e.charAt(e.length-2)==="/"){n.voidElement=true}n.name=i}else{n.attrs[r]=i.replace(/['"]/g,"")}}t++});return n}var f=/<(?:"[^"]*"['"]*|'[^']*'['"]*|[^'">])+>/g;var c=Object.create?Object.create(null):{};function p(e,t){t||(t={});t.components||(t.components=c);var r=[];var n;var i=-1;var a=[];var s={};var l=false;e.replace(f,function(f,c){if(l){if(f!=="</"+n.name+">"){return}else{l=false}}var p=f.charAt(1)!=="/";var o=c+f.length;var d=e.charAt(o);var h;if(p){i++;n=u(f);if(n.type==="tag"&&t.components[n.name]){n.type="component";l=true}if(!n.voidElement&&!l&&d){n.children.push({type:"text",content:e.slice(o,e.indexOf("<",o)),parent:n})}s[n.tagName]=n;if(i===0){r.push(n)}h=a[i-1];if(h){n.prev=h.children[h.children.length-1];h.children[h.children.length-1].next=n;h.children.push(n);n.parent=h}a[i]=n}if(!p||n.voidElement){i--;if(!l&&d!=="<"&&d){a[i].children.push({type:"text",content:e.slice(o,e.indexOf("<",o)),parent:a[i]})}}});return r}function o(e){var t=[];if(e.dsl&&e.dsl.length){var r="";var n;if((n=e.dsl.indexOf("t-for"))!==-1){var a=/([\w\W]+) in ([\w\W]+)/,s=e.attrs["t-for"].match(a);t.push({type:1,txt:"for(var i in "+s[2]+"){var "+s[1]+"="+s[2]+"[i];"});e.dsl.splice(n,1);delete e.attrs["t-for"];t=t.concat(o(e));t.push({type:1,txt:"}"});return t}else if((n=e.dsl.indexOf("t-if"))!==-1){var l=e.attrs["t-if"];t.push({type:1,txt:"if("+e.attrs["t-if"]+"){"});e.dsl.splice(n,1);delete e.attrs["t-if"];t=t.concat(o(e));t.push({type:1,txt:"}"});return t}else if((n=e.dsl.indexOf("t-else-if"))!==-1){t.push({type:1,txt:"else if("+e.attrs["t-else-if"]+"){"});e.dsl.splice(n,1);delete e.attrs["t-else-if"];t=t.concat(o(e));t.push({type:1,txt:"}"});return t}else if((n=e.dsl.indexOf("t-else"))!==-1){t.push({type:1,txt:"else{"});e.dsl.splice(n,1);delete e.attrs["t-else"];t=t.concat(o(e));t.push({type:1,txt:"}"});return t}}if(e.type==="tag"){t.push("<"+e.name+"");for(var u in e.attrs){var f=e.attrs[u];if(u.charAt(0)===":"){u=u.substr(1);f=d(""+f)}t.push(" "+u+"='"+f+"'")}t.push(">");for(i in e.children){t=t.concat(o(e.children[i]))}!e.voidElement&&t.push("</"+e.name+">");return t}else if(e.type==="text"){t.push(e.content.replace(/\r?\n/g,""));return t}}function d(e){return'"+'+e+'+"'}return t});